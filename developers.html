<!DOCTYPE html>
<head>
	<title>Hudder wiki - Developers</title>
	<script src="base.js"></script>
	<meta charset="UTF-8">
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-M0SCB1X0YP"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'G-M0SCB1X0YP');
		gtag('consent', 'update', {
			'ad_user_data': 'granted',
			'ad_personalization': 'granted',
			'ad_storage': 'granted',
			'analytics_storage': 'granted'
		});
	</script>
	<style>
		#preplist li{
			margin-top: 0px;margin-bottom: 10px;
		}
	</style>
</head>
<body>
	<h1>Extending Hudder!</h1>
	<hr>
	<warning>You will need to know Basic Java for this</warning>
	<note>A sample Hudder extenstion is available on <a href="https://github.com/NGSpace/hudder-sample-mod">GitHub</a></note>
	<note>The ability for third party compilers was only added in version 3.5.0 and V2 compilers on 4.0.0</p></note>
	<note>If you ever fact ambiguity feel free to ask on Hudder's discord.</note>
	So, you're a big smarty-pants and want to improve hudder without directly modifying it? No worries! I am here to help!
	<h2>Preparations</h2>
	<hr><h4>Here's a list of what you will need to have prepared:</h4>
	<ul id="preplist">
		<li>JDK 21 or above (<a href="https://www.openlogic.com/openjdk-downloads?field_java_parent_version_target_id=828&field_operating_system_target_id=All&field_architecture_target_id=391&field_java_package_target_id=396">Download here</a>)</li>
		<li>A code editor/IDE (ex. Eclipse, Intellij, Zed, VSCode, Windows notepad, vim, emacs)</li>
		<li>A fabric mod (<a href="https://fabricmc.net/develop/">How to make one</a>)</li>
		<li>A warm blanket</li>
	</ul>
	<h3>Adding Hudder as a Gradle dependency</h3>
	<note>You will need the Fabric API dependency for hudder to function and ModMenu and Cloth-Config to edit hudder's config</note>
	First you will need to add modrinth's maven repository in the <inline-code>build.gradle</inline-code> file:
	<br><br><code>repositories {
	...
	exclusiveContent {
		forRepository {
			maven {
				name = "Modrinth"
				url = "https://api.modrinth.com/maven"
			}
		}
		filter {
			includeGroup "maven.modrinth"
		}
	}
}</code><br>After that you'll need to add Hudder's dependency:
<code>dependencies {
	modImplementation "maven.modrinth:hudder:[Hudder Version]-[Minecraft version]"
}</code>
<br>
...And done! You are now ready to start improving hudder!<br><br>





















<h1>Writing your own compiler using the V2 Runtime</h1>
<hr>
<note>The compiler needs to be created in it's own class/file, no lambdas or nested classes.</note>
First thing: we'll need a class:

<code>public class CustomCompiler extends AV2Compiler {
	@Override
	public CompileResult buildRuntime(ConfigInfo info, String text) throws CompileException {
		V2Runtime runtime = new V2Runtime(); //Init the runtime
		runtime.addRuntimeElement(new StringV2RuntimeElement(text, false, true)); //Add all the text
		return runtime;
	}
}</code>
<br>
The "info" variable contains all of hudder's settings in the forms of variables, this may be useful if you need to read hudder's settings however you still lack the ability to add/read your own.
<br>The "text" variables contains the text we want to compile (ex. "FPS: {fps}").
<br><br>
If you used this compiler it will just echo back whatever you put in the mainfile which will be useless so...

<h3>Adding variable support</h3>
Don't want to code your own variable system? No worries! The V2Runtime has you covered,
all you need to do is write the syntax parse te text, create a VariableV2RuntimeElement and add it to the runtime!
<br><br>
Here is a quick example of a simple variable parser:


<code>V2Runtime runtime = new V2Runtime(); //Init the runtime
StringBuilder textBuilder = new StringBuilder();

for (int ind = 0;ind&#60;text.length();ind++) { //Loop through every character in the file
	char c = text.charAt(ind);
	if (c=='%') {
		StringBuilder variableBuilder = new StringBuilder();
		runtime.addRuntimeElement(new StringV2RuntimeElement(textBuilder.toString(), false, true));
		textBuilder.setLength(0); //Reset the text builder
		while (ind&#60;text.length()) {
			ind++;
			c = text.charAt(ind);
			if (c=='%') {
			runtime.addRuntimeElement(new VariableV2RuntimeElement(variableBuilder.toString(), this)); // Add whatever text is left in the text builder
				break;
			}	
			variableBuilder.append(c);
		}
	} else textBuilder.append(c);
}
runtime.addRuntimeElement(new StringV2RuntimeElement(textBuilder.toString(), false, true)); // Add whatever text is left in the text builder
return runtime;
</code>

<br>
	
<br>













<h1>Writing your own Compiler from scratch</h1>
<hr>
<note>You better have a good reason to not use the V2 Runtime cause making your own compiler leaves to you all the work of managing performance, making a variable system, managing UIElement(s) by yourself, etc.</note>
<note>Extending AVarTextCompiler instead of ATextCompiler will help you with the basics of a variable system which might be helpful if you let variables be handled by a third party library (ex. the JavaScript compiler uses the JavaScript variable system but still has access to basic variables with the get() function)</note>

<code>public class CustomCompiler extends AVarTextCompiler {
	@Override
	public CompileResult compile(ConfigInfo info, String text) throws CompileException {
		return new CompileResult(text, 0, "", 0, "", 0, "", 0, new AUIElement[0]);
	}
}</code>
<br>
Same variables as before but beyond that you're kinda on your own so unless you're dedicated you should use the help of third parties for some stuff...

<br><br><br>
</body>
